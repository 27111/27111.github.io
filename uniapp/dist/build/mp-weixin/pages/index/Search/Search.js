(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/Search/Search"],{1200:function(t,e,r){"use strict";var n=r("b621"),a=r.n(n);a.a},2446:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(r("2ef0"));function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return c(t)||u(t)||i(t)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"===typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function u(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function c(t){if(Array.isArray(t))return l(t)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var h={data:function(){return{keyword:null,proposal:null,searchValue:null,searchresult:null,resultdata:null,type:null,isfocus:!1,category_type:"all",histories:[],historyserch:[]}},created:function(){this.debouncedGetSearchsong=n.default.debounce(this.getSear,800),this.historyserch=t.getStorageSync("historyserch")?JSON.parse(t.getStorageSync("historyserch")):[]},onLoad:function(){var e=this;t.getStorage({key:"history",success:function(t){e.histories=t.data}})},methods:{input:function(t){this.keyword=t},focus:function(t){console.log(t),this.isfocus=!1},clear:function(){this.isfocus=!1,this.searchresult=null,this.resultdata=null},search:function(e){var r=this;this.isfocus=!0,console.log(e),(e.value||e)&&t.request({url:"/apis/api/internal/1.15/zh_CN/search",method:"GET",data:{query:e.value?e.value:e,category_type:this.category_type,offset:3},success:function(t){r.searchresult=t.data,r.resultdata=t.data.data,r.type=r.searchresult.filters.category_type[0].filter_key}}),this.historyserch=e.value?s(new Set([e.value].concat(s(this.historyserch)))):s(this.historyserch),this.historyserch.length>10&&(this.historyserch=this.historyserch.slice(0,10))},getResultData:function(e){var r=this;t.request({url:"/apis/api/internal/1.15/zh_CN/search",method:"GET",data:{query:this.searchValue,category_type:e,offset:3},success:function(t){r.resultdata=null,r.resultdata=t.data.data}})},getSear:function(e){var r=this;t.request({url:"/apis/api/internal/1.23/zh_CN/typeahead",method:"GET",data:{query:this.keyword,limit:6},success:function(t){r.proposal=t.data.data}})},goTonnewpage:function(e,r,n){this.histories.map((function(t){return t.location_id})).includes(r)||(this.histories.push(n.result_object),t.setStorage({key:"history",data:this.histories})),"lodging"==e&&t.navigateTo({url:"/pages/index/Hotelintro/Hotelintro?id="+r}),"restaurants"==e&&t.navigateTo({url:"/pages/index/RestaurantIntro/RestaurantIntro?id="+r}),"things_to_do"==e&&t.navigateTo({url:"/pages/index/Attractiondetails/Attractiondetails?id="+r})},goRest:function(t,e){console.log(t,e),"geos"==t?(this.searchValue=e.name,this.search(e.name)):this.goTonnewpage(t,e.location_id)}},watch:{keyword:function(t){t?this.debouncedGetSearchsong(t):this.proposal=[]},type:function(t){console.log(t),this.getResultData(t)},historyserch:function(e){t.setStorageSync("historyserch",JSON.stringify(e))}}};e.default=h}).call(this,r("543d")["default"])},3594:function(t,e,r){"use strict";(function(t){r("24c9");n(r("66fd"));var e=n(r("f608"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=r,t(e.default)}).call(this,r("543d")["createPage"])},b586:function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return s})),r.d(e,"a",(function(){return n}));var n={uniSearchBar:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uni-search-bar/components/uni-search-bar/uni-search-bar")]).then(r.bind(null,"be16"))},uniRate:function(){return r.e("uni_modules/uni-rate/components/uni-rate/uni-rate").then(r.bind(null,"eca2"))}},a=function(){var t=this,e=t.$createElement,n=(t._self._c,r("d0f3")),a=r("d0f3"),s=t.resultdata||t.searchresult||!t.isfocus?null:r("4729");t._isMounted||(t.e0=function(e,r){var n=arguments[arguments.length-1].currentTarget.dataset,a=n.eventParams||n["event-params"];r=a.histo;t.searchValue=r,t.search(r)},t.e1=function(e,r){var n=arguments[arguments.length-1].currentTarget.dataset,a=n.eventParams||n["event-params"];r=a.nav;e.stopPropagation(),t.type=r.filter_key}),t.$mp.data=Object.assign({},{$root:{m0:n,m1:a,m2:s}})},s=[]},b621:function(t,e,r){},cebb:function(t,e,r){"use strict";r.r(e);var n=r("2446"),a=r.n(n);for(var s in n)"default"!==s&&function(t){r.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},f608:function(t,e,r){"use strict";r.r(e);var n=r("b586"),a=r("cebb");for(var s in a)"default"!==s&&function(t){r.d(e,t,(function(){return a[t]}))}(s);r("1200");var o,i=r("f0c5"),u=Object(i["a"])(a["default"],n["b"],n["c"],!1,null,"5ffec244",null,!1,n["a"],o);e["default"]=u.exports}},[["3594","common/runtime","common/vendor"]]]);